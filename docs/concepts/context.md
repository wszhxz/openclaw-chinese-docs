---
summary: "Context: what the model sees, how it is built, and how to inspect it"
read_when:
  - You want to understand what “context” means in OpenClaw
  - You are debugging why the model “knows” something (or forgot it)
  - You want to reduce context overhead (/context, /status, /compact)
title: "Context"
---
# 上下文

“上下文”是**OpenClaw发送给模型运行的所有内容**。它受到模型**上下文窗口**（令牌限制）的约束。

初学者思维模型：

- **系统提示**（由OpenClaw构建）：规则、工具、技能列表、时间/运行时、以及注入的工作区文件。
- **对话历史**：你的消息 + 本会话中助手的消息。
- **工具调用/结果 + 附件**：命令输出、文件读取、图像/音频等。

上下文**不是记忆**：记忆可以存储在磁盘上并稍后重新加载；上下文是模型当前窗口内的内容。

## 快速入门（检查上下文）

- `/status` → 快速查看“我的窗口有多满？”视图 + 会话设置。
- `/context list` → 注入的内容 + 大致大小（每文件 + 总计）。
- `/context detail` → 更深入的分析：每文件、每工具模式大小、每技能条目大小，以及系统提示大小。
- `/usage tokens` → 在正常回复后附加每回复的使用量脚注。
- `/compact` → 将旧历史摘要为紧凑条目以释放窗口空间。

另请参阅：[斜杠命令](/tools/slash-commands)、[令牌使用与成本](/token-use)、[压缩](/concepts/compaction)。

## 示例输出

值因模型、提供者、工具策略以及工作区内容而异。

### `/context list`

```
🧠 上下文分解
工作区： <workspaceDir>
引导最大/文件：20,000 字符
沙盒：mode=non-main 沙箱化=false
系统提示（运行）：38,412 字符 (~9,603 令牌) (项目上下文 23,901 字符 (~5,976 令牌))

注入的工作区文件：
- AGENTS.md：OK | 原始 1,742 字符 (~436 令牌) | 注入 1,742 字符 (~436 令牌)
- SOUL.md：OK | 原始 912 字符 (~228 令牌) | 注入 912 字符 (~228 令牌)
- TOOLS.md：截断 | 原始 54,210 字符 (~13,553 令牌) | 注入 20,962 字符 (~5,241 令牌)
- IDENTITY.md：OK | 原始 211 字符 (~53 令牌) | 注入 211 字符 (~53 令牌)
- USER.md：OK | 原始 388 字符 (~97 令牌) | 注入 388 字符 (~97 令牌)
- HEARTBEAT.md：缺失 | 原始 0 | 注入 0
- BOOTSTRAP.md：OK | 原始 0 字符 (~0 令牌) | 注入 0 字符 (~0 令牌)

技能列表（系统提示文本）：2,184 字符 (~546 令牌) (12 个技能)
工具：读取、编辑、写入、执行、处理、浏览器、消息、sessions_send、…
工具列表（系统提示文本）：1,032 字符 (~258 令牌)
工具模式（JSON）：31,988 字符 (~7,997 令牌) (计入上下文；未以文本形式显示)
工具：(同上)

会话令牌（缓存）：总计 14,250 / ctx=32,000
```

### `/context detail`

```
🧠 上下文分解（详细）
…
顶级技能（提示条目大小）：
- frontend-design：412 字符 (~103 令牌)
- oracle：401 字符 (~101 令牌)
… (+10 个更多技能)

顶级工具（模式大小）：
- 浏览器：9,812 字符 (~2,453 令牌)
- 执行：6,240 字符 (~1,560 令牌)
… (+N 个更多工具)
```

## 计入上下文窗口的内容

模型接收的所有内容均计入，包括：

- 系统提示（所有部分）。
- 对话历史。
- 工具调用 + 工具结果。
- 附件/转录（图像/音频/文件）。
- 压缩摘要和修剪产物。
- 提供者的“包装器”或隐藏标题（不可见，但仍计入）。

## OpenClaw如何构建系统提示

系统提示是**由OpenClaw拥有**并每次运行时重建的。它包括：

- 工具列表 + 简短描述。
- 技能列表（仅元数据；见下文）。
- 工作区位置。
- 时间（UTC + 转换后的用户时间，如配置）。
- 运行时元数据（主机/操作系统/模型/思考）。
- **项目上下文**下注入的工作区引导文件。

完整分解：[系统提示](/concepts/system-prompt)。

## 注入的工作区文件（项目上下文）

默认情况下，OpenClaw会注入一组固定的工作区文件（如果存在）：

- `AGENTS.md`
- `SOUL.md`
- `TOOLS.md`
- `IDENTITY.md`
- `USER.md`
- `HEARTBEAT.md`
- `BOOTSTRAP.md`（仅首次运行）

大文件会根据 `agents.defaults.bootstrapMaxChars`（默认 `20000` 字符）按文件截断。`/context` 会显示**原始 vs 注入**的大小以及是否发生截断。

## 技能：注入 vs 按需加载

系统提示包含一个紧凑的**技能列表**（名称 + 描述 + 位置）。此列表有实际开销。

技能指令**不默认包含**。模型仅在需要时才应 `读取` 技能的 `SKILL.md`。

## 工具：存在两种成本

工具以两种方式影响上下文：

1. **系统提示中的工具列表文本**（你看到的“工具”）。
2. **工具模式**（JSON）。这些模式发送给模型以便调用