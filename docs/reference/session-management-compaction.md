---
summary: "Deep dive: session store + transcripts, lifecycle, and (auto)compaction internals"
read_when:
  - You need to debug session ids, transcript JSONL, or sessions.json fields
  - You are changing auto-compaction behavior or adding â€œpre-compactionâ€ housekeeping
  - You want to implement memory flushes or silent system turns
title: "Session Management Deep Dive"
---
# ä¼šè¯ç®¡ç†ä¸å‹ç¼©ï¼ˆæ·±å…¥æ¢è®¨ï¼‰

æœ¬æ–‡æ¡£è§£é‡Šäº†OpenClawå¦‚ä½•ç«¯åˆ°ç«¯åœ°ç®¡ç†ä¼šè¯ï¼š

- **ä¼šè¯è·¯ç”±**ï¼ˆä¼ å…¥æ¶ˆæ¯å¦‚ä½•æ˜ å°„åˆ°ä¸€ä¸ª `sessionKey`ï¼‰
- **ä¼šè¯å­˜å‚¨** (`sessions.json`) åŠå…¶è·Ÿè¸ªçš„å†…å®¹
- **å¯¹è¯æŒä¹…åŒ–** (`*.jsonl`) åŠå…¶ç»“æ„
- **å¯¹è¯å«ç”Ÿ**ï¼ˆè¿è¡Œå‰çš„ç‰¹å®šæä¾›è€…ä¿®å¤ï¼‰
- **ä¸Šä¸‹æ–‡é™åˆ¶**ï¼ˆä¸Šä¸‹æ–‡çª—å£ä¸è·Ÿè¸ªä»¤ç‰Œï¼‰
- **å‹ç¼©**ï¼ˆæ‰‹åŠ¨+è‡ªåŠ¨å‹ç¼©ï¼‰åŠé¢„å‹ç¼©å·¥ä½œçš„é’©å­ä½ç½®
- **é™é»˜ç»´æŠ¤**ï¼ˆä¾‹å¦‚ä¸åº”äº§ç”Ÿç”¨æˆ·å¯è§è¾“å‡ºçš„å†…å­˜å†™å…¥ï¼‰

å¦‚æœæ‚¨å¸Œæœ›å…ˆè·å¾—é«˜å±‚æ¬¡çš„æ¦‚è¿°ï¼Œè¯·ä»ä»¥ä¸‹å¼€å§‹ï¼š

- [/concepts/session](/concepts/session)
- [/concepts/compaction](/concepts/compaction)
- [/concepts/session-pruning](/concepts/session-pruning)
- [/reference/transcript-hygiene](/reference/transcript-hygiene)

---

## æƒå¨æ¥æºï¼šç½‘å…³

OpenClawè®¾è®¡å›´ç»•ä¸€ä¸ªå•ä¸€çš„**ç½‘å…³è¿›ç¨‹**ï¼Œè¯¥è¿›ç¨‹æ‹¥æœ‰ä¼šè¯çŠ¶æ€ã€‚

- ç”¨æˆ·ç•Œé¢ï¼ˆmacOSåº”ç”¨ã€Webæ§åˆ¶ç•Œé¢ã€TUIï¼‰åº”æŸ¥è¯¢ç½‘å…³ä»¥è·å–ä¼šè¯åˆ—è¡¨å’Œä»¤ç‰Œè®¡æ•°ã€‚
- åœ¨è¿œç¨‹æ¨¡å¼ä¸‹ï¼Œä¼šè¯æ–‡ä»¶ä½äºè¿œç¨‹ä¸»æœºä¸Šï¼›â€œæ£€æŸ¥æœ¬åœ°Macæ–‡ä»¶â€ä¸ä¼šåæ˜ ç½‘å…³æ­£åœ¨ä½¿ç”¨çš„å†…å®¹ã€‚

---

## ä¸¤å±‚æŒä¹…åŒ–

OpenClawåœ¨ä¸¤å±‚ä¸­æŒä¹…åŒ–ä¼šè¯ï¼š

1. **ä¼šè¯å­˜å‚¨ (`sessions.json`)**
   - é”®å€¼æ˜ å°„ï¼š`sessionKey -> SessionEntry`
   - å°å‹ã€å¯å˜ã€å®‰å…¨ç¼–è¾‘ï¼ˆæˆ–åˆ é™¤æ¡ç›®ï¼‰
   - è·Ÿè¸ªä¼šè¯å…ƒæ•°æ®ï¼ˆå½“å‰ä¼šè¯IDã€æœ€åæ´»åŠ¨æ—¶é—´ã€å¼€å…³ã€ä»¤ç‰Œè®¡æ•°å™¨ç­‰ï¼‰

2. **å¯¹è¯ (`<sessionId>.jsonl`)**
   - å…·æœ‰æ ‘ç»“æ„çš„è¿½åŠ å¼å¯¹è¯ï¼ˆæ¡ç›®å…·æœ‰ `id` + `parentId`ï¼‰
   - å­˜å‚¨å®é™…å¯¹è¯ + å·¥å…·è°ƒç”¨ + å‹ç¼©æ‘˜è¦
   - ç”¨äºé‡å»ºæœªæ¥è½®æ¬¡çš„æ¨¡å‹ä¸Šä¸‹æ–‡

---

## ç£ç›˜ä¸Šçš„ä½ç½®

æ¯ä¸ªä»£ç†ï¼Œåœ¨ç½‘å…³ä¸»æœºä¸Šï¼š

- å­˜å‚¨ï¼š`~/.openclaw/agents/<agentId>/sessions/sessions.json`
- å¯¹è¯ï¼š`~/.openclaw/agents/<agentId>/sessions/<sessionId>.jsonl`
  - Telegramä¸»é¢˜ä¼šè¯ï¼š`.../<sessionId>-topic-<threadId>.jsonl`

OpenClawé€šè¿‡ `src/config/sessions.ts` è§£æè¿™äº›è·¯å¾„ã€‚

---

## ä¼šè¯å¯†é’¥ (`sessionKey`)

ä¸€ä¸ª `sessionKey` æ ‡è¯†æ‚¨æ‰€åœ¨çš„_å“ªä¸ªå¯¹è¯æ¡¶_ï¼ˆè·¯ç”±+éš”ç¦»ï¼‰ã€‚

å¸¸è§æ¨¡å¼ï¼š

- ä¸»/ç›´æ¥èŠå¤©ï¼ˆæ¯ä¸ªä»£ç†ï¼‰ï¼š`agent:<agentId>:<mainKey>`ï¼ˆé»˜è®¤ `main`ï¼‰
- ç¾¤ç»„ï¼š`agent:<agentId>:<channel>:group:<id>`
- æˆ¿é—´/é¢‘é“ï¼ˆDiscord/Slackï¼‰ï¼š`agent:<agentId>:<channel>:channel:<id>` æˆ– `...:room:<id>`
- å®šæ—¶ä»»åŠ¡ï¼š`cron:<job.id>`
- Webhookï¼š`hook:<uuid>`ï¼ˆé™¤éè¢«è¦†ç›–ï¼‰

è§„èŒƒè§„åˆ™è®°å½•äº [/concepts/session](/concepts/session)ã€‚

---

## ä¼šè¯ID (`sessionId`)

æ¯ä¸ª `sessionKey` æŒ‡å‘ä¸€ä¸ªå½“å‰ `sessionId`ï¼ˆç»§ç»­å¯¹è¯çš„å¯¹è¯æ–‡ä»¶ï¼‰ã€‚

ç»éªŒæ³•åˆ™ï¼š

- **Reset** (`/new`, `/reset`) åˆ›å»ºä¸€ä¸ªæ–°çš„ `sessionId` ç”¨äºè¯¥ `sessionKey`ã€‚
- **Daily reset** (é»˜è®¤ä¸ºç½‘å…³ä¸»æœºæœ¬åœ°æ—¶é—´å‡Œæ™¨4:00) åœ¨é‡ç½®è¾¹ç•Œä¹‹åçš„ä¸‹ä¸€æ¡æ¶ˆæ¯æ—¶åˆ›å»ºä¸€ä¸ªæ–°çš„ `sessionId`ã€‚
- **Idle expiry** (`session.reset.idleMinutes` æˆ–æ—§ç‰ˆ `session.idleMinutes`) åœ¨ç©ºé—²çª—å£åæ”¶åˆ°æ¶ˆæ¯æ—¶åˆ›å»ºä¸€ä¸ªæ–°çš„ `sessionId`ã€‚å½“åŒæ—¶é…ç½®äº† daily å’Œ idle æ—¶ï¼Œä»¥å…ˆè¿‡æœŸè€…ä¸ºå‡†ã€‚

å®ç°ç»†èŠ‚ï¼šè¯¥å†³ç­–å‘ç”Ÿåœ¨ `initSessionState()` ä¸­çš„ `src/auto-reply/reply/session.ts`ã€‚

---

## ä¼šè¯å­˜å‚¨æ¶æ„ (`sessions.json`)

å­˜å‚¨çš„å€¼ç±»å‹æ˜¯ `SessionEntry` åœ¨ `src/config/sessions.ts` ä¸­ã€‚

å…³é”®å­—æ®µï¼ˆä¸å®Œæ•´ï¼‰ï¼š

- `sessionId`: å½“å‰å¯¹è¯è®°å½•IDï¼ˆé™¤éè®¾ç½®äº† `sessionFile`ï¼Œå¦åˆ™æ–‡ä»¶åç”±æ­¤æ´¾ç”Ÿï¼‰
- `updatedAt`: æœ€è¿‘æ´»åŠ¨æ—¶é—´æˆ³
- `sessionFile`: å¯é€‰çš„æ˜¾å¼å¯¹è¯è®°å½•è·¯å¾„è¦†ç›–
- `chatType`: `direct | group | room`ï¼ˆå¸®åŠ©UIå’Œå‘é€ç­–ç•¥ï¼‰
- `provider`, `subject`, `room`, `space`, `displayName`: åˆ†ç»„/é¢‘é“æ ‡ç­¾çš„å…ƒæ•°æ®
- åˆ‡æ¢ï¼š
  - `thinkingLevel`, `verboseLevel`, `reasoningLevel`, `elevatedLevel`
  - `sendPolicy`ï¼ˆæ¯ä¸ªä¼šè¯çš„è¦†ç›–ï¼‰
- æ¨¡å‹é€‰æ‹©ï¼š
  - `providerOverride`, `modelOverride`, `authProfileOverride`
- ä»¤ç‰Œè®¡æ•°å™¨ï¼ˆå°½åŠ›è€Œä¸º/ä¾èµ–æä¾›å•†ï¼‰ï¼š
  - `inputTokens`, `outputTokens`, `totalTokens`, `contextTokens`
- `compactionCount`: æ­¤ä¼šè¯é”®è‡ªåŠ¨å‹ç¼©å®Œæˆçš„é¢‘ç‡
- `memoryFlushAt`: ä¸Šæ¬¡é¢„å‹ç¼©å†…å­˜åˆ·æ–°çš„æ—¶é—´æˆ³
- `memoryFlushCompactionCount`: ä¸Šæ¬¡åˆ·æ–°æ—¶çš„å‹ç¼©æ¬¡æ•°

å­˜å‚¨å¯ä»¥å®‰å…¨ç¼–è¾‘ï¼Œä½†ç½‘å…³æ˜¯æƒå¨ï¼šå®ƒå¯èƒ½ä¼šåœ¨ä¼šè¯è¿è¡Œæ—¶é‡å†™æˆ–æ¢å¤æ¡ç›®ã€‚

---

## å¯¹è¯è®°å½•ç»“æ„ (`*.jsonl`)

å¯¹è¯è®°å½•ç”± `@mariozechner/pi-coding-agent` çš„ `SessionManager` ç®¡ç†ã€‚

æ–‡ä»¶æ˜¯ JSONL æ ¼å¼ï¼š

- ç¬¬ä¸€è¡Œï¼šä¼šè¯å¤´ (`type: "session"`ï¼ŒåŒ…æ‹¬ `id`, `cwd`, `timestamp`, å¯é€‰çš„ `parentSession`)
- ç„¶åï¼šå¸¦æœ‰ `id` + `parentId`ï¼ˆæ ‘ï¼‰çš„ä¼šè¯æ¡ç›®

å€¼å¾—æ³¨æ„çš„æ¡ç›®ç±»å‹ï¼š

- `message`: ç”¨æˆ·/åŠ©æ‰‹/å·¥å…·ç»“æœæ¶ˆæ¯
- `custom_message`: è¿›å…¥æ¨¡å‹ä¸Šä¸‹æ–‡çš„æ‰©å±•æ³¨å…¥æ¶ˆæ¯ï¼ˆå¯ä»¥åœ¨UIä¸­éšè—ï¼‰
- `custom`: ä¸è¿›å…¥æ¨¡å‹ä¸Šä¸‹æ–‡çš„æ‰©å±•çŠ¶æ€
- `compaction`: å¸¦æœ‰ `firstKeptEntryId` å’Œ `tokensBefore` çš„æŒä¹…åŒ–å‹ç¼©æ‘˜è¦
- `branch_summary`: å¯¼èˆªæ ‘åˆ†æ”¯æ—¶çš„æŒä¹…åŒ–æ‘˜è¦

OpenClaw æ•…æ„ **ä¸**â€œä¿®å¤â€å¯¹è¯è®°å½•ï¼›ç½‘å…³ä½¿ç”¨ `SessionManager` æ¥è¯»å–å’Œå†™å…¥å®ƒä»¬ã€‚

---

## ä¸Šä¸‹æ–‡çª—å£ä¸è·Ÿè¸ªä»¤ç‰Œ

ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µå¾ˆé‡è¦ï¼š

1. **æ¨¡å‹ä¸Šä¸‹æ–‡çª—å£**ï¼šæ¯ä¸ªæ¨¡å‹çš„ç¡¬é™åˆ¶ï¼ˆæ¨¡å‹å¯è§çš„ä»¤ç‰Œï¼‰
2. **ä¼šè¯å­˜å‚¨è®¡æ•°å™¨**ï¼šå†™å…¥ `sessions.json` çš„æ»šåŠ¨ç»Ÿè®¡ä¿¡æ¯ï¼ˆç”¨äº /status å’Œä»ªè¡¨æ¿ï¼‰

å¦‚æœæ‚¨æ­£åœ¨è°ƒæ•´é™åˆ¶ï¼š

- ä¸Šä¸‹æ–‡çª—å£æ¥è‡ªæ¨¡å‹ç›®å½•ï¼ˆå¹¶é€šè¿‡é…ç½®å¯ä»¥è¢«è¦†ç›–ï¼‰ã€‚
- `contextTokens` åœ¨å­˜å‚¨ä¸­æ˜¯ä¸€ä¸ªè¿è¡Œæ—¶ä¼°è®¡/æŠ¥å‘Šå€¼ï¼›ä¸è¦å°†å…¶è§†ä¸ºä¸¥æ ¼çš„ä¿è¯ã€‚

æ›´å¤šå†…å®¹ï¼Œè¯·å‚é˜… [/token-use](/token-use)ã€‚

---

## å‹ç¼©ï¼šä»€ä¹ˆæ˜¯å‹ç¼©

å‹ç¼©å°†è¾ƒæ—§çš„å¯¹è¯æ€»ç»“ä¸ºä¸€ä¸ªæŒä¹…åŒ–çš„ `compaction` æ¡ç›®ä¿ç•™åœ¨è®°å½•ä¸­ï¼Œå¹¶ä¿æŒæœ€è¿‘çš„æ¶ˆæ¯ä¸å˜ã€‚

å‹ç¼©åï¼Œæœªæ¥çš„å›åˆä¼šçœ‹åˆ°ï¼š

- å‹ç¼©æ‘˜è¦
- `firstKeptEntryId` ä¹‹åçš„æ¶ˆæ¯

å‹ç¼©æ˜¯**æŒä¹…åŒ–**çš„ï¼ˆä¸ä¼šè¯ä¿®å‰ªä¸åŒï¼‰ã€‚è¯·å‚é˜… [/concepts/session-pruning](/concepts/session-pruning)ã€‚

---

## è‡ªåŠ¨å‹ç¼©ä½•æ—¶å‘ç”Ÿï¼ˆPi è¿è¡Œæ—¶ï¼‰

åœ¨åµŒå…¥å¼ Pi ä»£ç†ä¸­ï¼Œè‡ªåŠ¨å‹ç¼©åœ¨ä¸¤ç§æƒ…å†µä¸‹è§¦å‘ï¼š

1. **æº¢å‡ºæ¢å¤**ï¼šæ¨¡å‹è¿”å›ä¸Šä¸‹æ–‡æº¢å‡ºé”™è¯¯ â†’ å‹ç¼© â†’ é‡è¯•ã€‚
2. **é˜ˆå€¼ç»´æŠ¤**ï¼šåœ¨ä¸€ä¸ªæˆåŠŸçš„å›åˆä¹‹åï¼Œå½“ï¼š

`contextTokens > contextWindow - reserveTokens`

å…¶ä¸­ï¼š

- `contextWindow` æ˜¯æ¨¡å‹çš„ä¸Šä¸‹æ–‡çª—å£
- `reserveTokens` æ˜¯ä¸ºæç¤ºè¯ + ä¸‹ä¸€ä¸ªæ¨¡å‹è¾“å‡ºé¢„ç•™çš„ç©ºé—´

è¿™äº›æ˜¯ Pi è¿è¡Œæ—¶è¯­ä¹‰ï¼ˆOpenClaw æ¶ˆè´¹äº‹ä»¶ï¼Œä½† Pi å†³å®šä½•æ—¶å‹ç¼©ï¼‰ã€‚

---

## å‹ç¼©è®¾ç½® (`reserveTokens`, `keepRecentTokens`)

Pi çš„å‹ç¼©è®¾ç½®ä½äº Pi è®¾ç½®ä¸­ï¼š

```json5
{
  compaction: {
    enabled: true,
    reserveTokens: 16384,
    keepRecentTokens: 20000,
  },
}
```

OpenClaw è¿˜å¯¹åµŒå…¥å¼è¿è¡Œå¼ºåˆ¶æ‰§è¡Œä¸€ä¸ªå®‰å…¨åº•çº¿ï¼š

- å¦‚æœ `compaction.reserveTokens < reserveTokensFloor`ï¼ŒOpenClaw ä¼šæé«˜å®ƒã€‚
- é»˜è®¤åº•çº¿æ˜¯ `20000` ä¸ªæ ‡è®°ã€‚
- è®¾ç½® `agents.defaults.compaction.reserveTokensFloor: 0` ä»¥ç¦ç”¨åº•çº¿ã€‚
- å¦‚æœå·²ç»æ›´é«˜ï¼ŒOpenClaw ä¸ä¼šæ”¹å˜å®ƒã€‚

åŸå› ï¼šåœ¨å‹ç¼©å˜å¾—ä¸å¯é¿å…ä¹‹å‰ï¼Œä¸ºå¤šå›åˆâ€œå®¶åŠ¡â€ï¼ˆå¦‚å†…å­˜å†™å…¥ï¼‰ç•™å‡ºè¶³å¤Ÿçš„ç©ºé—´ã€‚

å®ç°ï¼š`ensurePiCompactionReserveTokens()` åœ¨ `src/agents/pi-settings.ts`
ï¼ˆä» `src/agents/pi-embedded-runner.ts` è°ƒç”¨ï¼‰ã€‚

---

## ç”¨æˆ·å¯è§çš„ç•Œé¢

ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è§‚å¯Ÿå‹ç¼©å’Œä¼šè¯çŠ¶æ€ï¼š

- `/status`ï¼ˆåœ¨ä»»ä½•èŠå¤©ä¼šè¯ä¸­ï¼‰
- `openclaw status`ï¼ˆCLIï¼‰
- `openclaw sessions` / `sessions --json`
- è¯¦ç»†æ¨¡å¼ï¼š`ğŸ§¹ Auto-compaction complete` + å‹ç¼©è®¡æ•°

---

## é™é»˜å®¶åŠ¡ (`NO_REPLY`)

OpenClaw æ”¯æŒâ€œé™é»˜â€å›åˆç”¨äºåå°ä»»åŠ¡ï¼Œç”¨æˆ·ä¸åº”çœ‹åˆ°ä¸­é—´è¾“å‡ºã€‚

çº¦å®šï¼š

- åŠ©æ‰‹çš„è¾“å‡ºä»¥ `NO_REPLY` å¼€å¤´ï¼Œè¡¨ç¤ºâ€œä¸è¦å‘ç”¨æˆ·å‘é€å›å¤â€ã€‚
- OpenClaw åœ¨äº¤ä»˜å±‚å‰¥ç¦»/æŠ‘åˆ¶æ­¤å†…å®¹ã€‚

æˆªè‡³ `2026.1.10`ï¼Œå½“éƒ¨åˆ†å—ä»¥ `NO_REPLY` å¼€å§‹æ—¶ï¼ŒOpenClaw è¿˜ä¼šæŠ‘åˆ¶**è‰ç¨¿/æ­£åœ¨è¾“å…¥æµ**ï¼Œå› æ­¤é™é»˜æ“ä½œä¸ä¼šåœ¨å›åˆä¸­é€”æ³„éœ²éƒ¨åˆ†è¾“å‡ºã€‚

---

## å‹ç¼©å‰çš„â€œå†…å­˜åˆ·æ–°â€ï¼ˆå·²å®ç°ï¼‰

ç›®æ ‡ï¼šåœ¨è‡ªåŠ¨å‹ç¼©å‘ç”Ÿä¹‹å‰ï¼Œè¿è¡Œä¸€ä¸ªé™é»˜ä»£ç†å›åˆï¼Œå°†æŒä¹…çŠ¶æ€å†™å…¥ç£ç›˜ï¼ˆä¾‹å¦‚ä»£ç†å·¥ä½œåŒºä¸­çš„ `memory/YYYY-MM-DD.md`ï¼‰ï¼Œä»¥ä¾¿å‹ç¼©ä¸ä¼šæ“¦é™¤å…³é”®ä¸Šä¸‹æ–‡ã€‚

OpenClaw ä½¿ç”¨**é¢„é˜ˆå€¼åˆ·æ–°**æ–¹æ³•ï¼š

1. ç›‘æ§ä¼šè¯ä¸Šä¸‹æ–‡ä½¿ç”¨æƒ…å†µã€‚
2. å½“å…¶è¶…è¿‡â€œè½¯é˜ˆå€¼â€ï¼ˆä½äºPiçš„å‹ç¼©é˜ˆå€¼ï¼‰æ—¶ï¼Œå‘ä»£ç†è¿è¡Œä¸€ä¸ªé™é»˜çš„â€œç«‹å³å†™å…¥å†…å­˜â€æŒ‡ä»¤ã€‚
3. ä½¿ç”¨ `NO_REPLY` ä»¥ä¾¿ç”¨æˆ·çœ‹ä¸åˆ°ä»»ä½•å˜åŒ–ã€‚

é…ç½® (`agents.defaults.compaction.memoryFlush`)ï¼š

- `enabled`ï¼ˆé»˜è®¤ï¼š`true`ï¼‰
- `softThresholdTokens`ï¼ˆé»˜è®¤ï¼š`4000`ï¼‰
- `prompt`ï¼ˆåˆ·æ–°è½®æ¬¡çš„ç”¨æˆ·æ¶ˆæ¯ï¼‰
- `systemPrompt`ï¼ˆåˆ·æ–°è½®æ¬¡é™„åŠ çš„ç³»ç»Ÿæç¤ºï¼‰

æ³¨æ„äº‹é¡¹ï¼š

- é»˜è®¤æç¤º/ç³»ç»Ÿæç¤ºä¸­åŒ…å«ä¸€ä¸ª `NO_REPLY` æç¤ºä»¥æŠ‘åˆ¶äº¤ä»˜ã€‚
- åˆ·æ–°æ¯ä¸ªå‹ç¼©å‘¨æœŸè¿è¡Œä¸€æ¬¡ï¼ˆåœ¨ `sessions.json` ä¸­è·Ÿè¸ªï¼‰ã€‚
- åˆ·æ–°ä»…é€‚ç”¨äºåµŒå…¥å¼Piä¼šè¯ï¼ˆCLIåç«¯è·³è¿‡æ­¤æ­¥éª¤ï¼‰ã€‚
- å½“ä¼šè¯å·¥ä½œåŒºä¸ºåªè¯»æ—¶è·³è¿‡åˆ·æ–°ï¼ˆ`workspaceAccess: "ro"` æˆ– `"none"`ï¼‰ã€‚
- æœ‰å…³å·¥ä½œåŒºæ–‡ä»¶å¸ƒå±€å’Œå†™å…¥æ¨¡å¼ï¼Œè¯·å‚é˜…[å†…å­˜](/concepts/memory)ã€‚

Piè¿˜åœ¨æ‰©å±•APIä¸­æš´éœ²äº†ä¸€ä¸ª `session_before_compact` é’©å­ï¼Œä½†OpenClawçš„åˆ·æ–°é€»è¾‘ç›®å‰ä½äºç½‘å…³ä¾§ã€‚

---

## æ•…éšœæ’é™¤æ£€æŸ¥è¡¨

- ä¼šè¯å¯†é’¥é”™è¯¯ï¼Ÿä»[/concepts/session](/concepts/session)å¼€å§‹ï¼Œå¹¶ç¡®è®¤ `sessionKey` åœ¨ `/status` ä¸­ã€‚
- å­˜å‚¨ä¸è®°å½•ä¸åŒ¹é…ï¼Ÿç¡®è®¤ç½‘å…³ä¸»æœºå’Œå­˜å‚¨è·¯å¾„æ¥è‡ª `openclaw status`ã€‚
- å‹ç¼©åƒåœ¾ä¿¡æ¯è¿‡å¤šï¼Ÿæ£€æŸ¥ï¼š
  - æ¨¡å‹ä¸Šä¸‹æ–‡çª—å£ï¼ˆå¤ªå°ï¼‰
  - å‹ç¼©è®¾ç½®ï¼ˆ`reserveTokens` å¯¹äºæ¨¡å‹çª—å£å¤ªé«˜å¯èƒ½å¯¼è‡´æ›´æ—©çš„å‹ç¼©ï¼‰
  - å·¥å…·ç»“æœè†¨èƒ€ï¼šå¯ç”¨/è°ƒæ•´ä¼šè¯ä¿®å‰ª
- é™é»˜å›åˆæ³„éœ²ï¼Ÿç¡®è®¤å›å¤ä»¥ `NO_REPLY` å¼€å¤´ï¼ˆç¡®åˆ‡æ ‡è®°ï¼‰ï¼Œå¹¶ä¸”ä½ ä½¿ç”¨çš„æ„å»ºç‰ˆæœ¬åŒ…å«æµå¼æŠ‘åˆ¶ä¿®å¤ã€‚